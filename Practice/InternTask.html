<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0,user-scalable=no">
	<title>Photo of The Whole Family</title>
	<style>
	*{margin:0;padding: 0;font-family: "微软雅黑"}
	html,body{height: 100%;overflow:hidden;}
	.page1{
		position: absolute;
		width: 100%;
		height: 100%;
		z-index: 100;
	}
	.page1 img{
		position: absolute;
	}
	.page1 img.bg{
		width:100%;
		height:100%;
	}
	.ask{
		height:6%;
		bottom:23%;
		left:50%;
		transform: translateX(-50%);
	}
	.begin{
		height:10%;
		bottom:10%;
		left:50%;
		transform: translateX(-50%);
	}
	#page2_wrapper
	{
	   position: relative;
	   width:100%;
	   height:100%;
	   background-image: url('background.jpg');
	   background-size: cover;
	}
	.page2{
		position: relative;
		width: 100%;
		height: 100%;
	}
	.header{
		position: relative;
		width: 100%;
		top:7%;
		height:6%;
	}
    .progress_lantern{
    	position: absolute;
    	top:-18%;
    	left:0;
    	width:10%;
    	text-align: center;

    }
    .times_lantern{
    	position: absolute;
    	width: 10%;
    	top:20%;
    	z-index: 100;
    }
    .rest-time,.times{width:47%;height:100%;display: inline-block;}
    .rest-time img:first-of-type{
     position: absolute;
     width:48%;
     top:17%;
 }
    .progress{
    	position: absolute;
        width:40%;
        height:100%;
        left:6%;
        opacity: 1;
        top:11%;
        background-image: url('progress.png');
        background-position: 80% 100%;
        background-size:cover;
        background-repeat: no-repeat;    	
    }
    .times img{position: absolute; width:47%;top:10%;}
    .times img:first-of-type{width:50%;}
    .times img:last-of-type{right:3.5%}
    .times img:nth-of-type(2){position: absolute; width:10%;left:88%;top:-10%;z-index:10}
    span.progress_lantern{
    	display: inline-block;
    	top:20%;
    	color:#E7F71A;
    	z-index: 10;
    }
    span.times_lantern{
    	display: inline-block;
    	right:-2%;
    	top:26%;
    	color:#E7F71A;;
    }
    .confirm{
    	position: absolute;
    	bottom:3%;
    	width:40%;
    	left:30%;
    }
    .question input {
    	display: inline-block;
    	position:absolute;
    	width:70%;
    	height:4%;
    	left:15%;
    	top:19%;
    	border:2px solid orange;
    	font-size:1rem;
    	font-weight:600;
    	color:#918A8A;
    	border-radius:10px;
    }
    .question img{
    	position:absolute;
    	height:4%;
    	right:15%;
    	top:19.3%;
    	line-height:4%;
    }
    .allpeople img{
    	position: absolute;
    	left:5%;
    	top:27%;
    	width:90%;
    }
    #page3{width:100%;height: 100%;}
    .page3{
    	width:100%;
    	height:100%;
    	background-image: url('page3.jpg');
    }
    .result{
    	position: absolute;
    	width:70%;
    	bottom:30%;
    	left:15%;
    }
    div.result{width:60%; height:15%;left:18%;}
    .btn{
    	position:absolute;
    	width: 100%;
    	height:100%;
    	margin:0 auto;
    	bottom:0;
    }
    .playAgain,.known,.share{
    	position: relative;
    	width:43%;
    	display: block;
    	margin:0 auto;
    	top: 70%;
    }
    .all{
    	position: absolute;
    }
    .all img{
    	position: absolute;
    	opacity: 0;
    }
   .down img{top:70%;}
    /*亲属们...*/
    .jiuye{
    	width:10%;
    	height:12%;
    	top:29%;
    	left:19%;
    }
    .gulaoye{
    	width:12%;
    	height:12%;
    	top:28%;
    	left:30%;
    }
     .gulao{
    	width:12%;
    	height:11%;
    	top:28%;
    	left:43%;
    }
     .gunai{
    	width:13%;
    	height:11%;
    	top:28%;
    	left:55.5%;
    }
     .gege{
    	width:11%;
    	height:12%;
    	top:28%;
    	left:69%;
    }
     .gugu{
    	width:12%;
    	height:10%;
    	top:41%;
    	left:10.5%;
    }
    .gufu{
    	width:12%;
    	height:11%;
    	top:41%;
    	left:23.5%;
    }
    .shenshen{
    	width:13%;
    	height:11%;
    	top:40%;
    	left:36%;
    }
    .shushu{
    	width:12%;
    	height:10%;
    	top:39%;
    	left:50%;
    }
    .yifu{
    	width:12%;
    	height:11%;
    	top:40%;
    	left:62%;
    }
    .yima{
    	width:12%;
    	height:11%;
    	top:40%;
    	left:73.5%;
    }
    .jiujiu{
    	width:13.5%;
    	height:13%;
    	top:51%;
    	left:5%;
    }
     .jiuma{
    	width:12%;
    	height:11%;
    	top:52%;
    	left:18%;
    }
     .biaomei{
    	width:12%;
    	height:10%;
    	top:52%;
    	left:29%;
    }
     .meifu{
    	width:12%;
    	height:11%;
    	top:51%;
    	left:42%;
    }
      .tangjie{
    	width:13%;
    	height:11%;
    	top:51%;
    	left:55%;
    }
      .jiefu{
    	width:12%;
    	height:12%;
    	top:51%;
    	left:68%;
    }
      .waishengnv{
    	width:12%;
    	height:12%;
    	top:52%;
    	left:80.5%;
    }
    .zhinv{
    	width:12%;
    	height:12%;
    	top:64%;
    	left:9%;
    }
    .waipo{
    	width:13%;
    	height:14%;
    	top:63%;
    	left:22%;
    }
    .waigong{
    	width:12%;
    	height:14%;
    	top:63%;
    	left:36%;
    }
    .yeye{
    	width:13%;
    	height:15%;
    	top:62%;
    	left:48.5%;
    }
    .nainai{
    	width:13%;
    	height:14%;
    	top:63%;
    	left:62%;
    }
     .zhizi{
    	width:14%;
    	height:13%;
    	top:64%;
    	left:75%;
    }
    .gugu img{top:50%;left:15%;}
    .gufu img{top:50%;left:10%;}
    .shenshen img{top:50%;left:10%;}
    .shushu img,.yifu img,.yima img{top:40%;}
    .jiujiu img{left:10%;top:60%;}
    .biaomei img{left:10%;top:65%;}
    .meifu img{left:10%;top:65%;}
    .tangjie img{left:5%;top:65%;}
    .jiefu img{left:5%;top:65%;}
    .waishengnv img{top:67%;}
    .zhinv img{left:15%;top:73%;}
    .waipo img{left:15%;top:60%;}
    .waigong img{top:50%;}
    .yeye img{top:50%;}
    .nainai img{top:50%;right:30%}
    .zhizi img{right:30%}



    .timeout img:first-of-type,.wrong img:first-of-type{
    	width:80%;
        position: absolute;
        left:10%;
        top:30%;
    }
    .timeout img:last-of-type,.wrong img:last-of-type{
    	position: absolute;
    	width:30%;
    	left:50%;
    	transform: translateX(-50%);
    	top:51%;
    }
    .wrong div{
    	width: 100%;
    	font-size:20px;
    	color:#DF1616;
    	display: inline-block;
    	position: absolute;
    	text-align: center;
    	top:46%;
    	z-index: 20;
    }
    .popular{
    	overflow: auto;
    	position: absolute;
    	top:0;
    	width:100%;
    	height:100%;
     	background-image: url('background.jpg');
    	background-size: cover;
    }
    .popular img:first-of-type{
    	position: absolute;
    	width:100%;
    	top:32%;
    }
    .popular img:nth-of-type(2){
    	position: absolute;
    	width:30%;
    	left:5%;
    	top:5%;
    }
    .popular img:nth-of-type(3){
    	position: absolute;
    	width:60%;
    	left:20%;
    	top:20%;
    }
    .popular img:nth-of-type(4){
    	width: 30%;
    	position: absolute;
    	right: 10%;
    	bottom:10%;
    }
    .popular img:last-of-type{
    	position: absolute;
    	width:46%;
    	left:27%;
    	top:70%;
    }
    .tip{
    	position:relative;
    	width:80%;
    	text-align:center;
    	margin:0 auto;
    	top:65%;
    	font-weight:600;
    	color:#8B8181;
    	opacity: .6;
    }
    .checked img{opacity: 1;}
    .warn{display:none;}
    .popular{display:none}
    #page2_wrapper{display:none;}
    #page3{display:none;}
    .wrong{display: none;}
 
	</style>
</head>
<body>
	<div class="page1">
		<img class="bg" src="page1.jpg" alt="page1" />
		<img class="ask" src="ask.png" alt="ask" />
		<img class="begin" src="begin.png" alt="begin" />
	</div>

	<div id="page2_wrapper">
		<audio class="music" src="http://app.uokay.cn/app/h5/16dati/songs/back1.mp3" autoplay="true" loop="true"></audio>
		<div class="header">
			<div class="rest-time">
				<img src="border.png" alt="border" />
				<span class="progress_lantern">60s</span>
				<div class="progress"></div>
				<img class="progress_lantern" src="lantern.png" alt="lantern"></div>

			<div class="times">
				<img src="border.png" alt="border" />
				<span class="times_lantern">0</span>
				<img class="progress_lantern" src="lantern.png" alt="lantern">
				<img src="progress.png" alt="progress" />
			</div>
		</div>

		<div class="question">
			<input type="text" />
			<div class="change">
				<img src="change.png" alt="change"></div>
		</div>

		<div class="allpeople">
			<img src="allPeople.png" alt="allPeople">

			<div class="all jiuye">
				<img src="right.png" alt="right"></div>
			<div class="all gulaoye">
				<img src="right.png" alt="right"></div>
			<div class="all gulao">
				<img src="right.png" alt="right"></div>
			<div class="all gunai">
				<img src="right.png" alt="right"></div>
			<div class="all gege">
				<img src="right.png" alt="right"></div>

			<div class="all gugu">
				<img src="right.png" alt="right"></div>
			<div class="all gufu">
				<img src="right.png" alt="right"></div>
			<div class="all shenshen">
				<img src="right.png" alt="right"></div>
			<div class="all shushu down">
				<img src="right.png" alt="right"></div>
			<div class="all yifu down">
				<img src="right.png" alt="right"></div>
			<div class="all yima down">
				<img src="right.png" alt="right"></div>

			<div class="all jiujiu down">
				<img src="right.png" alt="right"></div>
			<div class="all jiuma down">
				<img src="right.png" alt="right"></div>
			<div class="all biaomei down">
				<img src="right.png" alt="right"></div>
			<div class="all meifu down">
				<img src="right.png" alt="right"></div>
			<div class="all tangjie down">
				<img src="right.png" alt="right"></div>
			<div class="all jiefu down">
				<img src="right.png" alt="right"></div>
			<div class="all waishengnv down">
				<img src="right.png" alt="right"></div>

			<div class="all zhinv down">
				<img src="right.png" alt="right"></div>
			<div class="all waipo down">
				<img src="right.png" alt="right"></div>
			<div class="all waigong down">
				<img src="right.png" alt="right"></div>
			<div class="all yeye down">
				<img src="right.png" alt="right"></div>
			<div class="all nainai down">
				<img src="right.png" alt="right"></div>
			<div class="all zhizi down">
				<img src="right.png" alt="right"></div>

		</div>
		<img class="confirm" src="confirm.png" alt="confirm"></div>

	<div id='page3'>
		<img class="page3" src="page3.jpg" alt="page3" />
		<img class="result" src="result.png" alt="result" />
		<div class="result"></div>
		<div class="btn">
			<img class="known" src="popular.png"  alt="popular" />
			<img class="playAgain" src="playAgain.png" alt="playAgain" />
			<img class="share" src="share.png" alt="share" />
		</div>
	</div>

	<div class="warn">
		<div class="timeout">
			<img src="timeout.jpg" alt="timeout" />
			<img class="checkScore" src="checkScore.png" alt="score" />
		</div>
		<div class="wrong">
			<div>
				正确答案:
				<span class="rightAnswer"></span>
			</div>
			<img src="wrong.jpg" alt="wrong" />
			<img class="continue" src="continue.png" alt="continue" />
		</div>
	</div>

	<div class="popular">
		<img src="relation.png" alt="relation">
		<img src="ad.png" alt="ad">
		<img src="title.png" alt="title">
		<img src="last.png" alt="last">
		<img class="back" src="back.png" alt="back">
		<div class="tip">单击图片可放大，再次单击可返回</div>
	</div>
	<script>


//第二页
var page2=document.getElementById('page2_wrapper');
//所有亲属
var allpeople=document.getElementsByClassName('all');
//计时器
var timer=null;
//时间到
var timeout=document.getElementsByClassName('timeout')[0];
//警告页
var warn=document.getElementsByClassName('warn')[0];
//错误框
var wrong=document.getElementsByClassName('wrong')[0];
//输入框
var input=document.querySelector('.question input');
//确认按钮
var confirm=document.getElementsByClassName('confirm')[0];
//更换按钮
var changeBtn=document.querySelector('.change img');

//问题与答案
var questions=[
'姐姐家的女儿在哪里？',   
'奶奶的女儿在哪里？',   
'姨妈的妈妈在哪里？', 
'侄女的哥哥在哪里？', 
'姨妈的女儿在哪里？',   
'表妹的妈妈在哪里？',  
'奶奶的弟弟在哪里？',   
'外公的妹妹在哪里？',  
'爷爷的女儿在哪里？',  
'舅舅的爸爸在哪里？',  
'妈妈的姑父在哪里？',  
'爷爷的妹妹在哪里？',  
'叔叔家的孙子在哪里？',
'侄子的爸爸在哪里？',  
'外公的儿子在哪里？'];
var answers=[
['外甥女','waishengnv'],
['姑姑','gugu'],
['外婆','waipo'],
['侄子','zhizi'],
['表妹','biaomei'],
['姨妈','yima'],
['舅爷','jiuye'],
['姑姥','gulao'],
['姑姑','gugu'],
['外公','waigong'],
['姑姥爷','gulaoye'],
['姑奶','gunai'],
['侄子','zhizi'],
['哥哥','gege'],
['舅舅','jiujiu']];


//开始按钮
var page1=document.getElementsByClassName('page1')[0];
var beginBtn=document.getElementsByClassName('begin')[0];
var music=document.getElementsByClassName('music')[0];
beginBtn.addEventListener('touchstart',function(){
	page1.style.display='none'; 
	page2.style.display='block';
	music.play();
    timer=setInterval('countdown()',1000);
    input.value=questions[Math.floor(Math.random()*15)];
})
for(var i=0;i<allpeople.length;i++){
	allpeople[i].onclick=function(){
		for(var j=0;j<allpeople.length;j++){
			if(allpeople[j].classList.contains('checked')){
				allpeople[j].classList.remove('checked');
			}
		}
		this.classList.add('checked');
	}
}
//倒计时
function countdown(){
	var second=document.querySelectorAll('span.progress_lantern')[0];
	var restTime=Number(parseInt(second.innerText));
	var progress=document.querySelectorAll('.progress')[0];
    if(restTime>0){
     	restTime=restTime-1;;
    	second.innerText=restTime+'s';
    	progress.style.width=(restTime*5/3)*0.4+'%';
    }else{
    	warn.style.display='block';
    	wrong.style.display='none';
    	timeout.style.display='block';
    	second.innerText=60+'s';
    	clearInterval(timer);
    }
};
//更换问题
function changeQuestion(){
	var val=input.value;
	var num=Math.floor(Math.random()*15);
	for(var i=0;i<questions.length;i++){
		if(val==questions[i]&&num!=i){
          input.value=questions[num];
		}
	}
}
changeBtn.onclick=changeQuestion;
//确认按钮事件
confirm.onclick=function(){
	var val=input.value;
	var times=document.querySelector('span.times_lantern');
    var checked=document.querySelector('.checked');
	if(!checked){alert('请选择答案'); 
	return;
   };

//确认
for(var i=0;i<questions.length;i++){
        var checked=document.querySelector('.checked');
		if(val==questions[i]&&checked.classList.contains(answers[i][1])){
			times.innerText=Number(times.innerText)+1;
			changeQuestion();
		}else{
			if(val==questions[i]){
			    warn.style.display='block';
			    wrong.style.display='block';
			    clearInterval(timer);
			    var rightAnswer=document.getElementsByClassName('rightAnswer')[0];
			    console.log(answers[i][0]);
			    rightAnswer.innerText+=answers[i][0];
			}	
		}
	}
}

//错误提示框
var continueBtn=document.getElementsByClassName('continue')[0];
continueBtn.onclick=function(){
	var rightAnswer=document.getElementsByClassName('rightAnswer')[0];
	warn.style.display='none';
    timer=setInterval('countdown()',1000);
    changeQuestion();
    rightAnswer.innerText='';
}

var checkScore=document.getElementsByClassName('checkScore')[0];
checkScore.onclick=function(e){
	e.stopPropagation();
	warn.style.display='none';
	page2.style.display='none';
	timeout.style.display='none';
	page3.style.display='block';
	var resultWord=document.getElementsByClassName('result')[1];
	var score=Number(document.querySelector('span.times_lantern').innerText);
	var num,per;
	if(score<=5){
		switch(score){
			case 0:
			num=0,per=0;
			break;
			case 1:
			num=1,per=10;
			break;
			case 2:
			num=2,per=20;
			break;
			case 3:
			num=3,per=30;
			break;
			case 4:
			num=4,per=38;
			break;
			case 5:
			num=5,per=50;
			break;
		}
      resultWord.innerText='你认出了'+num+'个亲戚，仅击败了'+per+'%的人，还得努力练习哇，赶紧叫上小伙伴一起挑战吧!';
	}else if(score<10){
		alert(score);
		switch(score){
			case 6:
			num=6,per=56;
			break;
			case 7:
			num=7,per=68;
			break;
			case 8:
			num=8,per=78;
			break;
			case 9:
			num=9,per=80;
			break;
		}
      resultWord.innerText='你认出了'+num+'个亲戚，比'+per+
      '%的人更有文化耶，再也不怕久违的亲戚叫不上称呼了，赶紧叫小伙伴们也预习一下吧!';
	}else if(score>9){
		switch(score){
			case 10:
			num=10,per=85;
			break;
			case 11:
			num=11,per=89;
			break;
			case 12:
			num=12,per=91;
			break;
			case 13:
			num=13,per=94;
			break;
			case 14:
			num=14,per=97;
			break;
			case 15:
			num=15,per=99;
			break;
		}
      resultWord.innerText='你认出了'+num+'个亲戚，竟然超越了'+per+'%的人，你就是家族的传说啊！赶紧叫上小伙伴来挑战吧!';
	}
}


//第三页
var page3=document.getElementById('page3');
var known=document.getElementsByClassName('known')[0];
var playAgain=document.getElementsByClassName('playAgain')[0];
var share=document.getElementsByClassName('share')[0];
var page4=document.getElementsByClassName('popular')[0];
var tip=document.getElementsByClassName('tip')[0];
known.onclick=function(){
	page3.style.display='none';
	page4.style.display='block';
}
playAgain.onclick=function(){
location.reload(false);
}

//第四页
var back=document.getElementsByClassName('back')[0];
back.onclick=function(){
	page4.style.display='none';
	page3.style.display='block';
}
var photo=document.querySelector('.popular img:first-of-type');
photo.onclick=function(){
	if(!this.classList.contains('large')){
	this.classList.add('large');
	this.style.width='500%';
	back.style.display='none';
	tip.style.display='none';
}else{
	this.classList.remove('large');
	this.style.width='100%';
	back.style.display='block';
	tip.style.display='block';
}
}
</script>
</body>
</html>
